<!doctype html>
<html lang="en">
  <head>
    <title>Quote Custom Sync Documentation</title>
    <meta charset="UTF-8" />
    <script type="module" src="./assets/index.js"></script>
    <script type="module" src="./assets/search-idx.js"></script>
    <script type="module" src="./assets/search.js"></script>
    <script charset="UTF-8" src="./assets/highlight.js"></script>
    <script charset="UTF-8" src="./assets/mark.js"></script>
    <script charset="UTF-8" src="./assets/lunr.js"></script>
    <link rel="stylesheet" href="./assets/highlight.css" />
    <link rel="stylesheet" type="text/css" href="./assets/index.css" />
    <link rel="shortcut icon" type="image/png" href="./assets/favicon.png" />
  </head>

  <body>
    <div id="side-bar">
      <div id="logo-container">
        <div class="title">Quote Custom Sync Documentation</div>
        <img src="assets/logo.png" />
        <div class="subtitle">
          for <a target="_blank" rel="noopener noreferrer" href="https://github.com/dschach/QuoteCustomSync">Quote Custom Sync</a>
        </div>
      </div>
      <div id="search-wrapper">
        <div class="search-icon"></div>
        <input id="search-input" type="text" autocomplete="off" placeholder="Search..." />
      </div>
      <ul id="search-results" class=""></ul>
      <div class="navbar">
        <nav role="navigation">
          <a class="nav-header" id="home" href="javascript:void(0)" onclick="goToLocation('index.html');"> Home </a>
          <details id="Configuration" class="group-name">
            <summary id="header-Configuration" class="nav-header">
              <span>Configuration</span>
            </summary>
            <ul>
              <!-- menu items -->
              <li title="ConfigController" id="item-ConfigController" class="nav-item class public" onclick="goToLocation('ConfigController.html');">
                <a tabindex="1" href="javascript:void(0)">ConfigController</a>
              </li>
              <li
                title="CustomMetadataClient"
                id="item-CustomMetadataClient"
                class="nav-item class public"
                onclick="goToLocation('CustomMetadataClient.html');">
                <a tabindex="1" href="javascript:void(0)">CustomMetadataClient</a>
              </li>
              <li
                title="ConfigControllerTest"
                id="item-ConfigControllerTest"
                class="nav-item class private"
                onclick="goToLocation('ConfigControllerTest.html');">
                <a tabindex="1" href="javascript:void(0)">ConfigControllerTest</a>
              </li>
              <li
                title="CustomMetadataClientTest"
                id="item-CustomMetadataClientTest"
                class="nav-item class private"
                onclick="goToLocation('CustomMetadataClientTest.html');">
                <a tabindex="1" href="javascript:void(0)">CustomMetadataClientTest</a>
              </li>
            </ul>
          </details>
          <details id="OppQuoteSync" class="group-name">
            <summary id="header-OppQuoteSync" class="nav-header">
              <span>OppQuoteSync</span>
            </summary>
            <ul>
              <!-- menu items -->
              <li title="QuoteSyncHandler" id="item-QuoteSyncHandler" class="nav-item class global" onclick="goToLocation('QuoteSyncHandler.html');">
                <a tabindex="1" href="javascript:void(0)">QuoteSyncHandler</a>
              </li>
              <li title="QuoteSyncUtil" id="item-QuoteSyncUtil" class="nav-item class public" onclick="goToLocation('QuoteSyncUtil.html');">
                <a tabindex="1" href="javascript:void(0)">QuoteSyncUtil</a>
              </li>
              <li title="QuoteSyncTest" id="item-QuoteSyncTest" class="nav-item class public" onclick="goToLocation('QuoteSyncTest.html');">
                <a tabindex="1" href="javascript:void(0)">QuoteSyncTest</a>
              </li>
            </ul>
          </details>
        </nav>
      </div>
    </div>
    <table id="content">
      <tr>
        <td class="scoping-panel">
          Show: <input type="checkbox" checked="true" id="cbx-all" onclick="toggleAllScopes(this.checked);" />
          <label for="cbx-all">All</label>&nbsp;&nbsp;
          <input type="checkbox" checked="true" id="cbx-global" onclick="toggleScope('global', this.checked);" />
          <label for="cbx-global"> global </label>&nbsp;&nbsp;<input
            type="checkbox"
            checked="true"
            id="cbx-public"
            onclick="toggleScope('public', this.checked);" />
          <label for="cbx-public"> public </label>&nbsp;&nbsp;<input
            type="checkbox"
            checked="true"
            id="cbx-private"
            onclick="toggleScope('private', this.checked);" />
          <label for="cbx-private"> private </label>&nbsp;&nbsp;<input
            type="checkbox"
            checked="true"
            id="cbx-testmethod"
            onclick="toggleScope('testmethod', this.checked);" />
          <label for="cbx-testmethod"> testMethod </label>
        </td>
      </tr>
      <tr>
        <td class="doc-page">
          <h2 class="section-title">Home</h2>
          <link href="assets/styling.css" rel="stylesheet" />
          <p>
            <a href="https://github.com/dschach/QuoteCustomSync/actions/workflows/ci.yml"
              ><img src="https://github.com/dschach/QuoteCustomSync/actions/workflows/ci.yml/badge.svg?branch=main" alt="On Push"
            /></a>
            <a href="https://github.com/dschach/QuoteCustomSync/actions/workflows/pr.yml"
              ><img src="https://github.com/dschach/QuoteCustomSync/actions/workflows/pr.yml/badge.svg?branch=main" alt="PR Validation"
            /></a>
            <a href="https://github.com/dschach/QuoteCustomSync/actions/workflows/release-please.yml"
              ><img
                src="https://github.com/dschach/QuoteCustomSync/actions/workflows/release-please.yml/badge.svg?branch=main"
                alt="Release Workflow"
            /></a>
            <a href="https://codecov.io/gh/dschach/QuoteCustomSync"
              ><img src="https://codecov.io/gh/dschach/QuoteCustomSync/branch/main/graph/badge.svg?token=H2ZFLBGGZR" alt="codecov"
            /></a>
          </p>
          <h1>Custom Quote Sync</h1>
          <p>Metadata-driven Quote-Opportunity custom field synchronization</p>
          <p>
            (based on Salesforce Labs <a href="https://appexchange.salesforce.com/listingDetail?listingId=a0N30000003Iop5EAC">Custom Quote Sync</a>)
          </p>
          <ul>
            <li>
              <a href="#custom-quote-sync">Custom Quote Sync</a>
              <ul>
                <li><a href="#changelog">Changelog</a></li>
                <li><a href="#installation-instructions">Installation Instructions</a></li>
              </ul>
            </li>
            <li>
              <a href="#general-description">General Description</a>
              <ul>
                <li><a href="#benefits">Benefits</a></li>
              </ul>
            </li>
            <li><a href="#whats-included">What&#39;s Included</a></li>
            <li>
              <a href="#what-salesforce-syncs-automatically">What Salesforce syncs automatically</a>
              <ul>
                <li>
                  <a href="#fields-synced-by-default">Fields synced by default</a>
                  <ul>
                    <li><a href="#non-synced-fields-of-interest">NON-Synced fields of interest</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="#configuration">Configuration</a>
              <ul>
                <li><a href="#custom-metadata-types">Custom Metadata Types</a></li>
                <li><a href="#bypass">Bypass</a></li>
                <li><a href="#using-your-own-trigger-framework">Using Your Own Trigger Framework</a></li>
              </ul>
            </li>
            <li><a href="#known-limitations">Known Limitations</a></li>
          </ul>
          <h2><a href="./changelog.html">Changelog</a></h2>
          <h2><a href="./installation.html">Installation Instructions</a></h2>
          <p>AppExchange Listing:</p>
          <p>
            Latest package (Production):
            <a href="https://login.salesforce.com/packaging/installPackage.apexp?p0=04t3a000000LddNAAS"
              >https://login.salesforce.com/packaging/installPackage.apexp?p0=04t3a000000LddNAAS</a
            >
          </p>
          <p>
            Latest package (Sandbox):
            <a href="https://test.salesforce.com/packaging/installPackage.apexp?p0=04t3a000000LddNAAS"
              >https://test.salesforce.com/packaging/installPackage.apexp?p0=04t3a000000LddNAAS</a
            >
          </p>
          <h1>General Description</h1>
          <p>
            This app allows you to configure custom fields mapping between Opportunity and Quote, and custom fields on OpportunityLineItem and
            QuoteLineItem. The mapped fields will be synchronized automatically similar to the standard Quote Sync process.
          </p>
          <p>Syncing is skipped for all Quotes without an Opportunity (which can be enabled in setup).</p>
          <h2>Benefits</h2>
          <p>
            This package uses <em>Custom Metadata</em> so your customizations are preserved in sandboxes. (Custom Settings would not be preserved.)
            This includes all synchronized fields and configuration values.
          </p>
          <p>
            The ability to use the included triggers or your own means that you have complete control over the order of execution within, say, your
            Opportunity trigger handler.
          </p>
          <h1>What&#39;s Included</h1>
          <p>
            This package comes with some code to sync custom fields between Opportunities and Quotes (and their Line Items), but it needs to know
            which fields to map between the proper objects.
          </p>
          <p>
            This is achieved via Custom Metadata Types. Indicate the Opportunity and Quote (or Line Item) field names on the correct CMT and the
            package will do the rest.
          </p>
          <h1>What Salesforce syncs automatically</h1>
          <p>
            See the documentation here:
            <a href="https://help.salesforce.com/s/articleView?id=sf.quotes_synch_overview.htm&type=5"
              >https://help.salesforce.com/s/articleView?id=sf.quotes_synch_overview.htm&amp;type=5</a
            >
          </p>
          <h2>Fields synced by default</h2>
          <p>
            Some fields do not need to be specified, as Salesforce will synchronize those values automatically between the Opportunity and the syncing
            Quote, and between line items. These are the standard fields:
          </p>
          <table class="methodtable">
            <thead>
              <tr>
                <th>Opportunity</th>
                <th>Quote</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>ContactId</code></td>
                <td><code>ContactId</code></td>
              </tr>
              <tr>
                <td><code>Division</code></td>
                <td><code>Division</code></td>
              </tr>
              <tr>
                <td><code>Id</code></td>
                <td><code>OpportunityId</code></td>
              </tr>
              <tr>
                <td><code>Pricebook2Id</code></td>
                <td><code>Pricebook2Id</code></td>
              </tr>
              <tr>
                <td><code>SyncedQuoteId</code></td>
                <td><code>Id</code></td>
              </tr>
            </tbody>
          </table>
          <table class="methodtable">
            <thead>
              <tr>
                <th>OpportunityLineItem Field Name</th>
                <th>QuoteLineItem Field Name</th>
                <th>Note</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <strong><code>Id</code></strong>
                </td>
                <td>
                  <strong><code>OpportunityLineItemId</code></strong>
                </td>
                <td>primary matching key</td>
              </tr>
              <tr>
                <td><code>Description</code></td>
                <td><code>Description</code></td>
                <td>LINE descriptions are synchronized.</td>
              </tr>
              <tr>
                <td><code>Discount</code></td>
                <td><code>Discount</code></td>
                <td></td>
              </tr>
              <tr>
                <td><code>SortOrder</code></td>
                <td><code>SortOrder</code></td>
                <td></td>
              </tr>
              <tr>
                <td><code>PricebookEntryId</code></td>
                <td><code>PricebookEntryId</code></td>
                <td>updates List Price, Product, etc</td>
              </tr>
              <tr>
                <td><code>Quantity</code></td>
                <td><code>Quantity</code></td>
                <td></td>
              </tr>
              <tr>
                <td><code>ServiceDate</code></td>
                <td><code>ServiceDate</code></td>
                <td>Label: Date</td>
              </tr>
              <tr>
                <td><code>UnitPrice</code></td>
                <td><code>UnitPrice</code></td>
                <td>Label: Sales Price</td>
              </tr>
            </tbody>
          </table>
          <p>
            If there are no line items, <code>Opportunity.Amount</code> does NOT synchronize with the <code>Quote.GrandTotal</code> field. The only
            way to have a total amount on a Quote is to add Line Items.
          </p>
          <p>
            There are some Opportunity and Quote fields that do not &quot;line up&quot; with each other. For example, there may be a Tax field on
            Quote, but there is not one on Opportunity. They may be included in custom syncing configuration, but there WILL be errors if one of the
            fields cannot be written to (such a a formula field).
          </p>
          <h3>NON-Synced fields of interest</h3>
          <ul>
            <li>
              <code>Quote.Description</code> and <code>Opportunity.Description</code> - though line item <code>Description</code> fields are
              automatically synchronized by the platform
            </li>
            <li><code>QuoteLineItem.LineNumber</code> An autonumber field that has no parallel field on <code>OpportunityLineItem</code></li>
            <li><code>Quote.LineItemCount</code> is a standard field with no corresponding field on <code>Opportunity</code></li>
          </ul>
          <h1>Configuration</h1>
          <h2>Custom Metadata Types</h2>
          <p>
            Two CMTs are included for field sync config: <code>Quote Sync Field</code> and <code>Quote Line Sync Field</code>. Four fields on each
            must be filled in:
          </p>
          <ol>
            <li>
              Go to Setup &gt; Custom Metadata Types and click <code>Manage Records</code> on one of the metadata types. We will use
              <code>Quote Sync Field</code> as our example.
            </li>
            <li>
              If you are syncing two text fields, named <code>QuoteText__c</code> on Quote and <code>OpportunityText__c</code> on Opportunity, create
              a custom metadata type with the following:
              <ol>
                <li>
                  Name and DeveloperName are user-friendly fields and are not used by the app. Perhaps call this entry <code>Text</code>.
                  <code>DeveloperName</code> must be unique.
                </li>
                <li>
                  Type the field names into the <code>Quote Field</code> (<code>QuoteText__c</code>) and
                  <code>Opportunity Field</code> (<code>OpportunityText__c</code>) fields. this single record is used for both directions of
                  synchronization.
                </li>
              </ol>
            </li>
            <li>Save the record and go to the next one.</li>
          </ol>
          <p>
            Again, the same CMT records are used for updating the Opportunity from its syncing Quote, and for updating the syncing Quote from its
            Opportunity.
          </p>
          <h2>Bypass</h2>
          <p>
            You may wish to deactivate quote syncing for the entire org, specific users, or specific profiles. Do this by going to the included Custom
            Setting <code>Quote_Sync_Bypass__c</code> and selecting <code>Bypass__c</code> for the appropriate records.
          </p>
          <h2>Using Your Own Trigger Framework</h2>
          <p>
            This package comes with four triggers, but you may wish to run the sync actions at a specific place in your automations. This is possible;
            you just need to bypass the triggers via Custom Metadata records.
          </p>
          <ol>
            <li>
              <p>
                Call all four methods in the appropriate trigger handlers. (You can substitute your own variables for the standard
                <code>Trigger.new</code>, etc.)
              </p>
              <pre><code class="language-apex">// Opportunity Trigger (after update)
new x2qcs.QuoteSyncHandler().syncOpportunities(Trigger.new, Trigger.oldMap);
</code></pre>
              <pre><code class="language-apex">// Quote Trigger (after insert, after update)
new x2qcs.QuoteSyncHandler().syncQuotes(Trigger.new, Trigger.oldMap);
</code></pre>
              <pre><code class="language-apex">// OpportunityLineItem Trigger (after insert, after update)
new x2qcs.QuoteSyncHandler().syncOppLines(Trigger.new, Trigger.oldMap);
</code></pre>
              <pre><code class="language-apex">// QuoteLineItem Trigger (after insert, after update)
new x2qcs.QuoteSyncHandler().syncQuoteLines(Trigger.new, Trigger.oldMap);
</code></pre>
            </li>
            <li>
              <p>
                Update the <code>Use Packaged Triggers</code> preference/configuration in the <code>Configure</code> screen accessible from the
                <code>Installed Packages</code> list. <code>False</code> means you will call the handler methods from your custom triggers.
              </p>
              <p>There, you can also view the users who have been assigned application licenses</p>
              <!-- 1. Edit the included `Quote Custom Sync Config` custom metadata record `Use_Included_Triggers` and set `Enabled__c` to `false` -->
            </li>
          </ol>
          <h1>Known Limitations</h1>
          <p>
            Syncing a read-only field on <code>OpportunityLineItem</code>, such as <code>ProductCode</code> with a custom field on
            <code>QuoteLineItem</code> will fail because one of the fields is read-only. This will cause an error. Do not include read-only fields in
            your sync configurations.
          </p>
        </td>
      </tr>
      <tr>
        <td class="footer">
          <div>
            <a href="https://github.com/no-stack-dub-sack/apexdox-vs-code" target="_blank" rel="noopener noreferrer"> Powered By ApexDox VS Code </a>
          </div>
        </td>
      </tr>
    </table>
  </body>
</html>
